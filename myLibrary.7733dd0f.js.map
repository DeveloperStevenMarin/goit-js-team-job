{"mappings":"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","sources":["src/movieModal.js"],"sourcesContent":["import { API_KEY } from \"./config\";\r\n\r\nconst watchedList = JSON.parse(localStorage.getItem('watchedList')) || [];\r\nconst queueList = JSON.parse(localStorage.getItem('queueList')) || [];\r\n\r\nconst addToWatchedBtn = document.getElementById('add-to-watched--btn');\r\nconst addToQueueBtn = document.getElementById('add-to-queue--btn');\r\n\r\nconst btnCloseModal = document.getElementById('movie-modal--close-btn');\r\nconst modal = document.getElementById('movie-modal');\r\nbtnCloseModal.addEventListener('click', () => {\r\n    modal.style.display = 'none';\r\n});\r\n\r\nwindow.openModal = function (movie) {\r\n\r\n    const modal = document.getElementById('movie-modal');\r\n    modal.style.display = 'flex';\r\n    getMovieData(movie)\r\n\r\n}\r\n\r\nfunction getMovieData(movieID) {\r\n    const baseImageUrl = 'https://image.tmdb.org/t/p/';\r\n    const movieId = movieID; // ID de la pelÃ­cula que deseas buscar\r\n    const language = 'en'; // Idioma en el que deseas recibir la respuesta\r\n\r\n\r\n    const img = document.getElementById('movie-modal--image');\r\n    const title = document.getElementById('movie-modal-title');\r\n    const votes = document.getElementById('movie-modal-votes');\r\n    const popularity = document.getElementById('movie-modal-popularity');\r\n    const originalTitle = document.getElementById('movie-modal-original-title');\r\n    const genre = document.getElementById('movie-modal-genre');\r\n    const about = document.getElementById('movie-modal-about');\r\n    const watchedBtn = document.getElementById('add-to-watched--btn');\r\n    const queueBtn = document.getElementById('add-to-queue--btn');\r\n\r\n    const updatedQueueMoviesList = queueList.filter(movie => movie !== movieID);\r\n    const updatedWatchedMoviesList = watchedList.filter(movie => movie !== movieID);\r\n\r\n    if (updatedQueueMoviesList.length !== queueList.length) {\r\n        queueBtn.textContent = 'Remove from queue'\r\n        addToQueueBtn.addEventListener('click', () => {\r\n            removeFromQueue(updatedQueueMoviesList)\r\n        })\r\n    } else if ((!queueList || (updatedQueueMoviesList.length === queueList.length))) {\r\n        queueBtn.textContent = 'Add to queue'\r\n        addToQueueBtn.addEventListener('click', () => {\r\n            addToQueue()\r\n            removeFromWatched(watchedList.filter(movie => movie !== movieID));\r\n        })\r\n    }\r\n\r\n    if (updatedWatchedMoviesList.length !== watchedList.length) {\r\n        watchedBtn.textContent = 'Remove from watched'\r\n        addToWatchedBtn.addEventListener('click', () => {\r\n            removeFromWatched(updatedWatchedMoviesList)\r\n        })\r\n    } else if ((!watchedList) || (updatedWatchedMoviesList.length === watchedList.length)) {\r\n        watchedBtn.textContent = 'Add to watched'\r\n        addToWatchedBtn.addEventListener('click', () => {\r\n            addToWatched()\r\n            removeFromQueue(queueList.filter(movie => movie !== movieID))\r\n        })\r\n    }\r\n\r\n    fetch(`https://api.themoviedb.org/3/movie/${movieId}?api_key=${API_KEY}&language=${language}`)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            img.src = `${baseImageUrl}w500${data.poster_path}`;\r\n            title.textContent = data.title;\r\n            votes.textContent = data.vote_average + ' / ' + data.vote_count;\r\n            popularity.textContent = data.popularity;\r\n            originalTitle.textContent = data.original_title;\r\n            // genre.textContent = data.genres;\r\n            const genreName = data.genres.map((genre) => genre.name).join(' | ');\r\n            // console.log(genreName);\r\n            genre.textContent = genreName;\r\n\r\n            about.textContent = data.overview;\r\n            addToWatchedBtn.value = data.id;\r\n            addToQueueBtn.value = data.id;\r\n        })\r\n        .catch(error => console.error(error));\r\n}\r\nfunction addToWatched() {\r\n    const watchedList = JSON.parse(localStorage.getItem('watchedList')) || [];\r\n\r\n    if (!watchedList) {\r\n        watchedList = JSON.stringify([addToWatchedBtn.value]);\r\n    } else {\r\n        const idExists = watchedList.includes(addToWatchedBtn.value)\r\n        if (!idExists) {\r\n            watchedList.push(addToWatchedBtn.value);\r\n            localStorage.setItem('watchedList', JSON.stringify(watchedList));\r\n        }\r\n    }\r\n\r\n    modal.style.display = 'none';\r\n    location.reload()\r\n}\r\nfunction addToQueue() {\r\n    if (!queueList) {\r\n        queueList = JSON.stringify([addToQueueBtn.value]);\r\n    } else {\r\n        const idExists = queueList.includes(addToQueueBtn.value)\r\n        if (!idExists) {\r\n            queueList.push(addToQueueBtn.value);\r\n            localStorage.setItem('queueList', JSON.stringify(queueList));\r\n        }\r\n    }\r\n    modal.style.display = 'none';\r\n    location.reload()\r\n}\r\n\r\nfunction removeFromQueue(updatedQueueMoviesList) {\r\n    localStorage.setItem('queueList', JSON.stringify(updatedQueueMoviesList));\r\n    modal.style.display = 'none';\r\n    location.reload()\r\n}\r\n\r\nfunction removeFromWatched(updatedWatchedMoviesList) {\r\n    localStorage.setItem('watchedList', JSON.stringify(updatedWatchedMoviesList));\r\n    modal.style.display = 'none';\r\n    location.reload()\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["$4ukh0","parcelRequire","$6531fdc12b470cee$var$watchedList","JSON","parse","localStorage","getItem","$6531fdc12b470cee$var$queueList","$6531fdc12b470cee$var$addToWatchedBtn","document","getElementById","$6531fdc12b470cee$var$addToQueueBtn","$6531fdc12b470cee$var$btnCloseModal","$6531fdc12b470cee$var$modal","$6531fdc12b470cee$var$removeFromQueue","updatedQueueMoviesList","setItem","stringify","style","display","location","reload","$6531fdc12b470cee$var$removeFromWatched","updatedWatchedMoviesList","addEventListener","window","openModal","movie","movieID","baseImageUrl","movieId","language","img","title","votes","popularity","originalTitle","genre1","about","watchedBtn","queueBtn","filter","length","textContent","includes","value","push","$6531fdc12b470cee$var$addToQueue","watchedList1","$6531fdc12b470cee$var$addToWatched","fetch","API_KEY","then","response","json","data","src","poster_path","vote_average","vote_count","original_title","genreName","genres","map","genre","name","join","overview","id","catch","error","console","$6531fdc12b470cee$var$getMovieData"],"version":3,"file":"myLibrary.7733dd0f.js.map"}